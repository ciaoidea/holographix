# Recovery Chunks (Systematic RLNC)

Recovery chunks are optional parity chunks used to reconstruct missing residual
slices. They are generated by `holo.recovery` and stored as `recovery_*.holo`.

## Header Format (HORC)
Header struct: `>4sBBBBIIIII` (big-endian)

```
0   4  magic             = "HORC"
4   1  rec_version       = 1
5   1  base_kind         = 1 (image) or 2 (audio)
6   1  base_codec_version (2 or 3)
7   1  flags             bit0: payload is zlib-compressed
8   4  block_count       (u32)
12  4  coded_id          (u32)
16  4  slice_len         (u32)
20  4  coeff_len         (u32)
24  4  payload_len       (u32)
```

Payload:
- `coeff_len` bytes of coefficients (uint8) for the linear combination.
- `payload_len` bytes of coded payload (compressed if flag is set).

If `REC_FLAG_ZLIB` is set, the payload is zlib-compressed and must decompress
back to exactly `slice_len` bytes.

## Generation
`build_recovery_chunks(slices, overhead, seed)`:
- Each original slice is padded to `slice_len` (max of slice lengths).
- Each recovery chunk picks random coefficients in [1, 255] over GF(256).
- Payload is the XOR-sum of coefficient-multiplied slices.
- `seed` makes coefficients deterministic.

## Usage
During decode, missing residual slices can be solved with GF(256) linear
systems if enough independent recovery chunks are present. The current code
uses recovery only for olonomic v3 image/audio decoding.

## Mesh Interaction
Recovery chunks are transmitted with chunk IDs offset by 1,000,000. The
INV/WANT control plane cannot request them (u16 limit).

## Related Code
- `src/holo/recovery.py`
